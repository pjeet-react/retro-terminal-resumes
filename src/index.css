@import url('https://fonts.googleapis.com/css2?family=VT323&family=IBM+Plex+Mono:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 20 15% 6%;
    --foreground: 40 30% 90%;
    --primary: 38 100% 50%;
    --primary-foreground: 20 15% 6%;
    --secondary: 30 60% 25%;
    --secondary-foreground: 40 30% 90%;
    --accent: 45 100% 60%;
    --accent-foreground: 20 15% 6%;
    --muted: 25 20% 15%;
    --muted-foreground: 35 20% 55%;
    --card: 22 18% 10%;
    --card-foreground: 40 30% 90%;
    --popover: 22 18% 10%;
    --popover-foreground: 40 30% 90%;
    --border: 30 40% 25%;
    --input: 30 40% 25%;
    --ring: 38 100% 50%;
    --destructive: 0 70% 50%;
    --destructive-foreground: 40 30% 90%;
    --crt-amber: 38 100% 50%;
    --crt-amber-dim: 35 80% 35%;
    --crt-amber-glow: 40 100% 65%;
    --crt-screen: 20 15% 4%;
    --crt-bezel: 25 30% 12%;
    --scanline: 0 0% 0%;
    --radius: 0.5rem;
    --sidebar-background: 22 18% 10%;
    --sidebar-foreground: 40 30% 90%;
    --sidebar-primary: 38 100% 50%;
    --sidebar-primary-foreground: 20 15% 6%;
    --sidebar-accent: 30 60% 25%;
    --sidebar-accent-foreground: 40 30% 90%;
    --sidebar-border: 30 40% 25%;
    --sidebar-ring: 38 100% 50%;
  }
  .dark {
    --background: 20 15% 6%;
    --foreground: 40 30% 90%;
  }
}

@layer base {
  * { @apply border-border; }
  html { overflow: hidden; height: 100%; }
  body {
    @apply bg-background text-foreground;
    font-family: 'IBM Plex Mono', monospace;
    overflow: hidden;
    height: 100%;
  }
  #root { height: 100%; overflow: hidden; }
  h1, h2, h3, .font-display { font-family: 'VT323', monospace; letter-spacing: 0.05em; }
}

.crt-scanlines {
  pointer-events: none;
  position: fixed;
  inset: 0;
  z-index: 100;
  background: repeating-linear-gradient(0deg, transparent, transparent 2px, hsla(var(--scanline), 0.03) 2px, hsla(var(--scanline), 0.03) 4px);
}

.phosphor-glow {
  text-shadow: 0 0 5px hsl(var(--crt-amber-glow)), 0 0 10px hsl(var(--crt-amber)), 0 0 20px hsla(var(--crt-amber), 0.5), 0 0 40px hsla(var(--crt-amber), 0.3);
}

.phosphor-glow-subtle {
  text-shadow: 0 0 3px hsl(var(--crt-amber-glow)), 0 0 8px hsla(var(--crt-amber), 0.4);
}

.box-glow {
  box-shadow: 0 0 10px hsla(var(--crt-amber), 0.3), 0 0 20px hsla(var(--crt-amber), 0.2), inset 0 0 10px hsla(var(--crt-amber), 0.05);
}

.box-glow-strong {
  box-shadow: 0 0 15px hsla(var(--crt-amber), 0.5), 0 0 30px hsla(var(--crt-amber), 0.3), 0 0 45px hsla(var(--crt-amber), 0.2);
}

@keyframes screen-power-on {
  0% { clip-path: inset(50% 0); filter: brightness(2); opacity: 0; }
  20% { clip-path: inset(45% 0); filter: brightness(2.5); opacity: 1; }
  100% { clip-path: inset(0% 0); filter: brightness(1); opacity: 1; }
}

@keyframes screen-power-off {
  0% { clip-path: inset(0% 0); filter: brightness(1); opacity: 1; }
  100% { clip-path: inset(50% 0); filter: brightness(0); opacity: 0; }
}

@keyframes cascade-in {
  0% { opacity: 0; transform: translateY(-10px); filter: blur(2px); }
  100% { opacity: 1; transform: translateY(0); filter: blur(0); }
}

@keyframes pulse-glow {
  0%, 100% { text-shadow: 0 0 5px hsl(var(--crt-amber-glow)), 0 0 10px hsl(var(--crt-amber)); }
  50% { text-shadow: 0 0 8px hsl(var(--crt-amber-glow)), 0 0 15px hsl(var(--crt-amber)); }
}

.animate-screen-on { animation: screen-power-on 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
.animate-screen-off { animation: screen-power-off 0.4s cubic-bezier(0.55, 0, 1, 0.45) forwards; }
.animate-cascade { animation: cascade-in 0.5s ease-out forwards; }
.animate-pulse-glow { animation: pulse-glow 3s ease-in-out infinite; }

.cascade-delay-1 { animation-delay: 0.1s; opacity: 0; }
.cascade-delay-2 { animation-delay: 0.2s; opacity: 0; }
.cascade-delay-3 { animation-delay: 0.3s; opacity: 0; }
.cascade-delay-4 { animation-delay: 0.4s; opacity: 0; }
.cascade-delay-5 { animation-delay: 0.5s; opacity: 0; }
.cascade-delay-6 { animation-delay: 0.6s; opacity: 0; }

.retro-button {
  @apply relative px-4 py-2 font-display text-lg uppercase tracking-wider bg-secondary border-2 border-primary text-primary transition-all duration-150;
  box-shadow: inset -2px -2px 0 hsla(var(--crt-amber-dim), 0.5), inset 2px 2px 0 hsla(var(--crt-amber-glow), 0.3), 0 4px 0 hsl(var(--crt-amber-dim));
}
.retro-button:hover { @apply bg-primary text-primary-foreground; }
.retro-button:active { transform: translateY(2px); }

.taskbar {
  @apply fixed bottom-0 left-0 right-0 z-40 flex items-center h-14 px-2;
  background: linear-gradient(to top, hsl(var(--crt-bezel)), hsl(var(--secondary)));
  border-top: 2px solid hsl(var(--border));
}

.taskbar-button {
  @apply relative px-3 py-1.5 mx-0.5 font-display text-sm uppercase border border-border bg-card text-muted-foreground transition-all duration-150;
}
.taskbar-button:hover { @apply text-primary border-primary; }
.taskbar-button.active { @apply bg-primary text-primary-foreground border-primary; box-shadow: 0 0 10px hsla(var(--crt-amber), 0.4); }

.inventory-slot {
  @apply relative aspect-square p-2 bg-card border-2 border-border transition-all duration-200 cursor-pointer;
  box-shadow: inset 2px 2px 0 hsla(0, 0%, 0%, 0.3);
}
.inventory-slot:hover { @apply border-primary; box-shadow: inset 2px 2px 0 hsla(0, 0%, 0%, 0.3), 0 0 15px hsla(var(--crt-amber), 0.3); }

.retro-panel {
  @apply relative p-4 bg-card border-2 border-border;
  box-shadow: inset 2px 2px 0 hsla(0, 0%, 0%, 0.4), 0 5px 20px hsla(0, 0%, 0%, 0.5);
}

.section-header {
  @apply inline-block px-4 py-1 mb-6 font-display text-2xl md:text-3xl uppercase bg-primary text-primary-foreground;
  clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%);
}

.screen-container {
  @apply absolute inset-0 w-full h-full overflow-hidden flex items-center justify-center;
  padding-bottom: 3.5rem;
}

@media (prefers-reduced-motion: reduce) {
  .animate-screen-on, .animate-screen-off, .animate-cascade, .animate-pulse-glow {
    animation: none !important;
    opacity: 1 !important;
  }
}
